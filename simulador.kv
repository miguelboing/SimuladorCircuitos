#:import C kivy.utils.get_color_from_hex

<Gerenciador>:
# Gerenciador responsável por administrar as telas.
    Menu:
        name: 'menu'
    Interface_G:
        name: 'interface'
    Info:
        name:'info'

<Menu>:
# Tela de Menu com botões para acessar as outras telas.
    GridLayout:
        orientation:'vertical'
        cols: 1
        rows: 5
        size_hint: .8, 1
        pos_hint: {"center_x":.5}
        spacing: 15
        Label:
            text: 'Logic Gates Simulator'
            font_size: 60
            color: C("#333D51")
            bold: True
        Label:
            text: 'Beta Version 0.0.3'
            italic: True
            color: C("#333D51")
        Button:
            background_color: C("#333D51")
            text: 'Start the simulator'
            size_hint: .7, .40
            color: C("CBD0D8")
            pos_hint: {"center_x":.5}
            on_release: app.root.current = 'interface'
        Button:
            background_color: C("#333D51") 
            color: C("CBD0D8")
            size_hint: .7, .40
            text: 'About the project'
            on_release: app.root.current = 'info'


<Interface_G>:
    # Tela do simulador.
    BoxLayout: #Layout contendo toda a tela
        orientation:'vertical'

        BoxLayout:#Box layout com o menu superior   
            size_hint: 1, 0.15
            GridLayout:#Botões de componentes
                size_hint: 0.50, 1
                rows: 2
                cols: 4
                orientation:'vertical'
                canvas:
                    Color:
                        rgba:C("#D3AC2B")
                    Rectangle:
                        pos: self.pos
                        size: self.size
                Button:                    
                    text:'AND'
                    on_release: root.addComponent(comp_name='AND')
                Button:                    
                    text:'OR'
                    on_release: root.addComponent(comp_name='OR')
                Button:                    
                    text:'NOT'
                    on_release: root.addComponent(comp_name='NOT')
                Button:                    
                    text:'NAND'
                    on_release: root.addComponent(comp_name='NAND')
                Button:                    
                    text:'NOR'
                    on_release: root.addComponent(comp_name='NOR')
                Button:                    
                    text:'XOR'
                    on_release: root.addComponent(comp_name='XOR')
                Button:                    
                    text:'INP'
                    on_release: root.addComponent(comp_name='INPUT')
                Button:                    
                    text:'OUT'
                    on_release: root.addComponent(comp_name='OUTPUT')
            BoxLayout:
                canvas:
                    Color:
                        rgba:C("#D3AC2B")
                    Rectangle:
                        pos: self.pos
                        size: self.size
                BoxLayout:
                Button:
                    size_hint: .3,.5
                    text: "Return to menu"
                    on_release: app.root.current = 'menu'


        RelativeLayout:#Box layout com o resto a área de trabalho
            id: workflow
            canvas:
                Color:
                    rgba: C("#333D51")
                Rectangle:
                    pos: self.pos
                    size: self.size

<Info>:
    # Tela com informações sobre o projeto.
    GridLayout:
        orientation: "vertical"
        spacing: 15
        rows:3
        cols: 1
        size_hint: .8, 1
        pos_hint: {"center_x":.5}
        GridLayout:
            rows:6
            cols:1
            Label:     
                text:"Project created by Miguel Boing e Davi Seemann in 2020." 
            
            Label:
                text:"For more information, go to https://github.com/miguelboing/SimuladorCircuitos"
            Label:
                text:"Enjoy!"   
        Button:
            size_hint: .7, .16
            background_color: C("#333D51")
            text: 'Back to the main screen'
            on_release: app.root.current = 'menu'


<Comp>:    
    # Declaração do Widget Componente
    id: component
    drag_rectangle: self.x, self.y, self.width, self.height
    size_hint_x: None
    size_hint_y: None
    size_x: 60
    size_y: 60
    drag_timeout: 10000000
    drag_distance:0

    canvas:
        Color:
            rgba: 0,0,0,1
        Rectangle:
            pos: self.pos
            size: self.size
    Label:
        id: comp_name_l
        pos: component.pos

<Input>:
    Button:
        opacity: 0
        pos: self.parent.pos
        on_release: root.change_logical_state()
    Label:
        
        id: logical_state_l
        pos:[self.parent.pos[0], self.parent.pos[1] - 20] 